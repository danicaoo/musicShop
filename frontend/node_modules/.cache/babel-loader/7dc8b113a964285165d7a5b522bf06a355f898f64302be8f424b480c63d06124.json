{"ast":null,"code":"import{createAsyncThunk,createSlice}from'@reduxjs/toolkit';import{createMusician,updateMusician,getAllMusicians,getMusicianById,searchMusicians}from'../services/musicianService';export const fetchMusicians=createAsyncThunk('musicians/fetchAll',async()=>{return await getAllMusicians();});export const fetchMusicianDetails=createAsyncThunk('musicians/fetchDetails',async id=>{return await getMusicianById(id);});export const addNewMusician=createAsyncThunk('musicians/addNew',async musicianData=>{return await createMusician(musicianData);});export const modifyMusician=createAsyncThunk('musicians/update',async _ref=>{let{id,data}=_ref;return await updateMusician(id,data);});export const searchMusicianCatalog=createAsyncThunk('musicians/search',async query=>{return await searchMusicians(query);});const musicianSlice=createSlice({name:'musicians',initialState:{list:[],currentMusician:null,searchResults:[],status:'idle',error:null},reducers:{clearCurrentMusician:state=>{state.currentMusician=null;}},extraReducers:builder=>{builder.addCase(fetchMusicians.pending,state=>{state.status='loading';}).addCase(fetchMusicians.fulfilled,(state,action)=>{state.status='succeeded';state.list=action.payload;}).addCase(fetchMusicians.rejected,(state,action)=>{state.status='failed';state.error=action.error.message;}).addCase(fetchMusicianDetails.pending,state=>{state.status='loading';}).addCase(fetchMusicianDetails.fulfilled,(state,action)=>{state.status='succeeded';state.currentMusician=action.payload;}).addCase(fetchMusicianDetails.rejected,(state,action)=>{state.status='failed';state.error=action.error.message;}).addCase(addNewMusician.fulfilled,(state,action)=>{state.status='succeeded';state.list.push(action.payload);}).addCase(modifyMusician.fulfilled,(state,action)=>{var _state$currentMusicia;state.status='succeeded';const index=state.list.findIndex(m=>m.id===action.payload.id);if(index!==-1){state.list[index]=action.payload;}if(((_state$currentMusicia=state.currentMusician)===null||_state$currentMusicia===void 0?void 0:_state$currentMusicia.id)===action.payload.id){state.currentMusician=action.payload;}}).addCase(searchMusicianCatalog.fulfilled,(state,action)=>{state.status='succeeded';state.searchResults=action.payload;});}});export const{clearCurrentMusician}=musicianSlice.actions;export default musicianSlice.reducer;","map":{"version":3,"names":["createAsyncThunk","createSlice","createMusician","updateMusician","getAllMusicians","getMusicianById","searchMusicians","fetchMusicians","fetchMusicianDetails","id","addNewMusician","musicianData","modifyMusician","_ref","data","searchMusicianCatalog","query","musicianSlice","name","initialState","list","currentMusician","searchResults","status","error","reducers","clearCurrentMusician","state","extraReducers","builder","addCase","pending","fulfilled","action","payload","rejected","message","push","_state$currentMusicia","index","findIndex","m","actions","reducer"],"sources":["/Users/mak/musicShop/frontend/src/features/musicianSlice.js"],"sourcesContent":["import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport { \n  createMusician, \n  updateMusician, \n  getAllMusicians, \n  getMusicianById,\n  searchMusicians\n} from '../services/musicianService';\n\nexport const fetchMusicians = createAsyncThunk(\n  'musicians/fetchAll',\n  async () => {\n    return await getAllMusicians();\n  }\n);\n\nexport const fetchMusicianDetails = createAsyncThunk(\n  'musicians/fetchDetails',\n  async (id) => {\n    return await getMusicianById(id);\n  }\n);\n\nexport const addNewMusician = createAsyncThunk(\n  'musicians/addNew',\n  async (musicianData) => {\n    return await createMusician(musicianData);\n  }\n);\n\nexport const modifyMusician = createAsyncThunk(\n  'musicians/update',\n  async ({ id, data }) => {\n    return await updateMusician(id, data);\n  }\n);\n\nexport const searchMusicianCatalog = createAsyncThunk(\n  'musicians/search',\n  async (query) => {\n    return await searchMusicians(query);\n  }\n);\n\nconst musicianSlice = createSlice({\n  name: 'musicians',\n  initialState: {\n    list: [],\n    currentMusician: null,\n    searchResults: [],\n    status: 'idle',\n    error: null\n  },\n  reducers: {\n    clearCurrentMusician: (state) => {\n      state.currentMusician = null;\n    }\n  },\n  extraReducers: (builder) => {\n    builder\n      .addCase(fetchMusicians.pending, (state) => {\n        state.status = 'loading';\n      })\n      .addCase(fetchMusicians.fulfilled, (state, action) => {\n        state.status = 'succeeded';\n        state.list = action.payload;\n      })\n      .addCase(fetchMusicians.rejected, (state, action) => {\n        state.status = 'failed';\n        state.error = action.error.message;\n      })\n      .addCase(fetchMusicianDetails.pending, (state) => {\n        state.status = 'loading';\n      })\n      .addCase(fetchMusicianDetails.fulfilled, (state, action) => {\n        state.status = 'succeeded';\n        state.currentMusician = action.payload;\n      })\n      .addCase(fetchMusicianDetails.rejected, (state, action) => {\n        state.status = 'failed';\n        state.error = action.error.message;\n      })\n      .addCase(addNewMusician.fulfilled, (state, action) => {\n        state.status = 'succeeded';\n        state.list.push(action.payload);\n      })\n      .addCase(modifyMusician.fulfilled, (state, action) => {\n        state.status = 'succeeded';\n        const index = state.list.findIndex(m => m.id === action.payload.id);\n        if (index !== -1) {\n          state.list[index] = action.payload;\n        }\n        if (state.currentMusician?.id === action.payload.id) {\n          state.currentMusician = action.payload;\n        }\n      })\n      .addCase(searchMusicianCatalog.fulfilled, (state, action) => {\n        state.status = 'succeeded';\n        state.searchResults = action.payload;\n      });\n  }\n});\n\nexport const { clearCurrentMusician } = musicianSlice.actions;\nexport default musicianSlice.reducer;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}