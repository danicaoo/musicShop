{"ast":null,"code":"import React,{useEffect}from'react';import{useDispatch,useSelector}from'react-redux';import{fetchTopSellingAlbums}from'../features/albumSlice';import LoadingSpinner from'./LoadingSpinner';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const TopAlbums=()=>{const dispatch=useDispatch();const{topSelling,status,error}=useSelector(state=>state.albums);useEffect(()=>{if(status==='idle'){dispatch(fetchTopSellingAlbums());}},[dispatch,status]);if(status==='loading'){return/*#__PURE__*/_jsx(LoadingSpinner,{text:\"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430 \\u0434\\u0430\\u043D\\u043D\\u044B\\u0445 \\u043E \\u043F\\u0440\\u043E\\u0434\\u0430\\u0436\\u0430\\u0445...\"});}if(error){return/*#__PURE__*/_jsxs(\"div\",{className:\"alert-error max-w-2xl mx-auto\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-bold\",children:\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430 \\u0437\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0438\"}),/*#__PURE__*/_jsx(\"p\",{children:error})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow-md overflow-hidden\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-5 border-b\",children:/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-800\",children:\"\\u0422\\u043E\\u043F \\u043F\\u0440\\u043E\\u0434\\u0430\\u0436 \\u0442\\u0435\\u043A\\u0443\\u0449\\u0435\\u0433\\u043E \\u0433\\u043E\\u0434\\u0430\"})}),topSelling.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full divide-y divide-gray-200\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-50\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left font-medium text-gray-500 uppercase tracking-wider\",children:\"#\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left font-medium text-gray-500 uppercase tracking-wider\",children:\"\\u0410\\u043B\\u044C\\u0431\\u043E\\u043C\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left font-medium text-gray-500 uppercase tracking-wider\",children:\"\\u041A\\u0430\\u0442\\u0430\\u043B\\u043E\\u0436\\u043D\\u044B\\u0439 \\u043D\\u043E\\u043C\\u0435\\u0440\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left font-medium text-gray-500 uppercase tracking-wider\",children:\"\\u0410\\u043D\\u0441\\u0430\\u043C\\u0431\\u043B\\u044C\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-right font-medium text-gray-500 uppercase tracking-wider\",children:\"\\u041F\\u0440\\u043E\\u0434\\u0430\\u0436\\u0438\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-right font-medium text-gray-500 uppercase tracking-wider\",children:\"\\u0426\\u0435\\u043D\\u0430\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-right font-medium text-gray-500 uppercase tracking-wider\",children:\"\\u0412\\u044B\\u0440\\u0443\\u0447\\u043A\\u0430\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"bg-white divide-y divide-gray-200\",children:topSelling.map((item,index)=>/*#__PURE__*/_jsxs(\"tr\",{className:index%2===0?'bg-white':'bg-gray-50',children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:index+1}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 font-medium\",children:item.albumTitle}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 text-gray-600\",children:item.catalogNumber}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 text-gray-600\",children:item.ensembleName||'-'}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 text-right\",children:item.currentYearSales}),/*#__PURE__*/_jsxs(\"td\",{className:\"px-6 py-4 text-right\",children:[\"$\",item.retailPrice.toFixed(2)]}),/*#__PURE__*/_jsxs(\"td\",{className:\"px-6 py-4 text-right font-semibold\",children:[\"$\",(item.currentYearSales*item.retailPrice).toFixed(2)]})]},item.id))}),/*#__PURE__*/_jsx(\"tfoot\",{className:\"bg-gray-100 font-semibold\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{colSpan:\"4\",className:\"px-6 py-4 text-right\",children:\"\\u0418\\u0442\\u043E\\u0433\\u043E:\"}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 text-right\",children:topSelling.reduce((sum,item)=>sum+item.currentYearSales,0)}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 text-right\",children:\"-\"}),/*#__PURE__*/_jsxs(\"td\",{className:\"px-6 py-4 text-right\",children:[\"$\",topSelling.reduce((sum,item)=>sum+item.currentYearSales*item.retailPrice,0).toFixed(2)]})]})})]})}):/*#__PURE__*/_jsxs(\"div\",{className:\"p-12 text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"inline-block bg-gray-200 border-2 border-dashed rounded-xl w-16 h-16 mb-4\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-medium text-gray-700\",children:\"\\u0414\\u0430\\u043D\\u043D\\u044B\\u0435 \\u043E \\u043F\\u0440\\u043E\\u0434\\u0430\\u0436\\u0430\\u0445 \\u043E\\u0442\\u0441\\u0443\\u0442\\u0441\\u0442\\u0432\\u0443\\u044E\\u0442\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 mt-2\",children:\"\\u041D\\u0435\\u0442 \\u0438\\u043D\\u0444\\u043E\\u0440\\u043C\\u0430\\u0446\\u0438\\u0438 \\u043E \\u043F\\u0440\\u043E\\u0434\\u0430\\u0436\\u0430\\u0445 \\u0437\\u0430 \\u0442\\u0435\\u043A\\u0443\\u0449\\u0438\\u0439 \\u0433\\u043E\\u0434\"})]})]});};export default TopAlbums;","map":{"version":3,"names":["React","useEffect","useDispatch","useSelector","fetchTopSellingAlbums","LoadingSpinner","jsx","_jsx","jsxs","_jsxs","TopAlbums","dispatch","topSelling","status","error","state","albums","text","className","children","length","map","item","index","albumTitle","catalogNumber","ensembleName","currentYearSales","retailPrice","toFixed","id","colSpan","reduce","sum"],"sources":["/Users/mak/musicShop/frontend/src/components/TopAlbums.jsx"],"sourcesContent":["import React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { fetchTopSellingAlbums } from '../features/albumSlice';\nimport LoadingSpinner from './LoadingSpinner';\n\nconst TopAlbums = () => {\n  const dispatch = useDispatch();\n  const { topSelling, status, error } = useSelector(state => state.albums);\n\n  useEffect(() => {\n    if (status === 'idle') {\n      dispatch(fetchTopSellingAlbums());\n    }\n  }, [dispatch, status]);\n\n  if (status === 'loading') {\n    return <LoadingSpinner text=\"Загрузка данных о продажах...\" />;\n  }\n\n  if (error) {\n    return (\n      <div className=\"alert-error max-w-2xl mx-auto\">\n        <h3 className=\"font-bold\">Ошибка загрузки</h3>\n        <p>{error}</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"bg-white rounded-xl shadow-md overflow-hidden\">\n      <div className=\"p-5 border-b\">\n        <h2 className=\"text-2xl font-bold text-gray-800\">Топ продаж текущего года</h2>\n      </div>\n      \n      {topSelling.length > 0 ? (\n        <div className=\"overflow-x-auto\">\n          <table className=\"min-w-full divide-y divide-gray-200\">\n            <thead className=\"bg-gray-50\">\n              <tr>\n                <th className=\"px-6 py-3 text-left font-medium text-gray-500 uppercase tracking-wider\">#</th>\n                <th className=\"px-6 py-3 text-left font-medium text-gray-500 uppercase tracking-wider\">Альбом</th>\n                <th className=\"px-6 py-3 text-left font-medium text-gray-500 uppercase tracking-wider\">Каталожный номер</th>\n                <th className=\"px-6 py-3 text-left font-medium text-gray-500 uppercase tracking-wider\">Ансамбль</th>\n                <th className=\"px-6 py-3 text-right font-medium text-gray-500 uppercase tracking-wider\">Продажи</th>\n                <th className=\"px-6 py-3 text-right font-medium text-gray-500 uppercase tracking-wider\">Цена</th>\n                <th className=\"px-6 py-3 text-right font-medium text-gray-500 uppercase tracking-wider\">Выручка</th>\n              </tr>\n            </thead>\n            <tbody className=\"bg-white divide-y divide-gray-200\">\n              {topSelling.map((item, index) => (\n                <tr key={item.id} className={index % 2 === 0 ? 'bg-white' : 'bg-gray-50'}>\n                  <td className=\"px-6 py-4 whitespace-nowrap\">{index + 1}</td>\n                  <td className=\"px-6 py-4 font-medium\">{item.albumTitle}</td>\n                  <td className=\"px-6 py-4 text-gray-600\">{item.catalogNumber}</td>\n                  <td className=\"px-6 py-4 text-gray-600\">{item.ensembleName || '-'}</td>\n                  <td className=\"px-6 py-4 text-right\">{item.currentYearSales}</td>\n                  <td className=\"px-6 py-4 text-right\">${item.retailPrice.toFixed(2)}</td>\n                  <td className=\"px-6 py-4 text-right font-semibold\">\n                    ${(item.currentYearSales * item.retailPrice).toFixed(2)}\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n            <tfoot className=\"bg-gray-100 font-semibold\">\n              <tr>\n                <td colSpan=\"4\" className=\"px-6 py-4 text-right\">Итого:</td>\n                <td className=\"px-6 py-4 text-right\">\n                  {topSelling.reduce((sum, item) => sum + item.currentYearSales, 0)}\n                </td>\n                <td className=\"px-6 py-4 text-right\">-</td>\n                <td className=\"px-6 py-4 text-right\">\n                  ${topSelling.reduce(\n                    (sum, item) => sum + (item.currentYearSales * item.retailPrice), \n                    0\n                  ).toFixed(2)}\n                </td>\n              </tr>\n            </tfoot>\n          </table>\n        </div>\n      ) : (\n        <div className=\"p-12 text-center\">\n          <div className=\"inline-block bg-gray-200 border-2 border-dashed rounded-xl w-16 h-16 mb-4\" />\n          <h3 className=\"text-xl font-medium text-gray-700\">Данные о продажах отсутствуют</h3>\n          <p className=\"text-gray-500 mt-2\">Нет информации о продажах за текущий год</p>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default TopAlbums;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}