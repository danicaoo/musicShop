{"ast":null,"code":"import axios from 'axios';\nconst api = axios.create({\n  baseURL: process.env.NODE_ENV === 'production' ? '/api' : 'http://localhost:5001/api',\n  timeout: 10000,\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\n\n// Перехватчик для обработки ошибок\napi.interceptors.response.use(response => response, error => {\n  if (error.response) {\n    var _error$response$data;\n    // Сервер ответил с кодом ошибки\n    return Promise.reject({\n      message: ((_error$response$data = error.response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.error) || 'Ошибка сервера',\n      status: error.response.status\n    });\n  } else if (error.request) {\n    // Запрос был сделан, но ответ не получен\n    return Promise.reject({\n      message: 'Сервер не отвечает',\n      status: 503\n    });\n  } else {\n    // Ошибка при настройке запроса\n    return Promise.reject({\n      message: error.message,\n      status: 0\n    });\n  }\n});\napi.interceptors.request.use(config => {\n  console.log(`Request: ${config.method.toUpperCase()} ${config.url}`);\n  return config;\n});\n\n// Добавим логирование ошибок\napi.interceptors.response.use(response => response, error => {\n  var _error$response;\n  console.error(`API Error: ${error.message}`, (_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.data);\n  return Promise.reject(error);\n});\nexport default api;","map":{"version":3,"names":["axios","api","create","baseURL","process","env","NODE_ENV","timeout","headers","interceptors","response","use","error","_error$response$data","Promise","reject","message","data","status","request","config","console","log","method","toUpperCase","url","_error$response"],"sources":["/Users/mak/musicShop/frontend/src/api.js"],"sourcesContent":["import axios from 'axios';\n\nconst api = axios.create({\n  baseURL: process.env.NODE_ENV === 'production' \n    ? '/api' \n    : 'http://localhost:5001/api',\n  timeout: 10000,\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\n\n// Перехватчик для обработки ошибок\napi.interceptors.response.use(\n  response => response,\n  error => {\n    if (error.response) {\n      // Сервер ответил с кодом ошибки\n      return Promise.reject({\n        message: error.response.data?.error || 'Ошибка сервера',\n        status: error.response.status\n      });\n    } else if (error.request) {\n      // Запрос был сделан, но ответ не получен\n      return Promise.reject({\n        message: 'Сервер не отвечает',\n        status: 503\n      });\n    } else {\n      // Ошибка при настройке запроса\n      return Promise.reject({\n        message: error.message,\n        status: 0\n      });\n    }\n  }\n);\n\napi.interceptors.request.use(config => {\n  console.log(`Request: ${config.method.toUpperCase()} ${config.url}`);\n  return config;\n});\n\n// Добавим логирование ошибок\napi.interceptors.response.use(\n  response => response,\n  error => {\n    console.error(`API Error: ${error.message}`, error.response?.data);\n    return Promise.reject(error);\n  }\n);\n\nexport default api;"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AAEzB,MAAMC,GAAG,GAAGD,KAAK,CAACE,MAAM,CAAC;EACvBC,OAAO,EAAEC,OAAO,CAACC,GAAG,CAACC,QAAQ,KAAK,YAAY,GAC1C,MAAM,GACN,2BAA2B;EAC/BC,OAAO,EAAE,KAAK;EACdC,OAAO,EAAE;IACP,cAAc,EAAE;EAClB;AACF,CAAC,CAAC;;AAEF;AACAP,GAAG,CAACQ,YAAY,CAACC,QAAQ,CAACC,GAAG,CAC3BD,QAAQ,IAAIA,QAAQ,EACpBE,KAAK,IAAI;EACP,IAAIA,KAAK,CAACF,QAAQ,EAAE;IAAA,IAAAG,oBAAA;IAClB;IACA,OAAOC,OAAO,CAACC,MAAM,CAAC;MACpBC,OAAO,EAAE,EAAAH,oBAAA,GAAAD,KAAK,CAACF,QAAQ,CAACO,IAAI,cAAAJ,oBAAA,uBAAnBA,oBAAA,CAAqBD,KAAK,KAAI,gBAAgB;MACvDM,MAAM,EAAEN,KAAK,CAACF,QAAQ,CAACQ;IACzB,CAAC,CAAC;EACJ,CAAC,MAAM,IAAIN,KAAK,CAACO,OAAO,EAAE;IACxB;IACA,OAAOL,OAAO,CAACC,MAAM,CAAC;MACpBC,OAAO,EAAE,oBAAoB;MAC7BE,MAAM,EAAE;IACV,CAAC,CAAC;EACJ,CAAC,MAAM;IACL;IACA,OAAOJ,OAAO,CAACC,MAAM,CAAC;MACpBC,OAAO,EAAEJ,KAAK,CAACI,OAAO;MACtBE,MAAM,EAAE;IACV,CAAC,CAAC;EACJ;AACF,CACF,CAAC;AAEDjB,GAAG,CAACQ,YAAY,CAACU,OAAO,CAACR,GAAG,CAACS,MAAM,IAAI;EACrCC,OAAO,CAACC,GAAG,CAAC,YAAYF,MAAM,CAACG,MAAM,CAACC,WAAW,CAAC,CAAC,IAAIJ,MAAM,CAACK,GAAG,EAAE,CAAC;EACpE,OAAOL,MAAM;AACf,CAAC,CAAC;;AAEF;AACAnB,GAAG,CAACQ,YAAY,CAACC,QAAQ,CAACC,GAAG,CAC3BD,QAAQ,IAAIA,QAAQ,EACpBE,KAAK,IAAI;EAAA,IAAAc,eAAA;EACPL,OAAO,CAACT,KAAK,CAAC,cAAcA,KAAK,CAACI,OAAO,EAAE,GAAAU,eAAA,GAAEd,KAAK,CAACF,QAAQ,cAAAgB,eAAA,uBAAdA,eAAA,CAAgBT,IAAI,CAAC;EAClE,OAAOH,OAAO,CAACC,MAAM,CAACH,KAAK,CAAC;AAC9B,CACF,CAAC;AAED,eAAeX,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}